(this["webpackJsonpnebula-ortiz"]=this["webpackJsonpnebula-ortiz"]||[]).push([[0],{41:function(e,t,c){},43:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var a=c(5),n=c.n(a),i=c(33),s=c.n(i),r=(c(41),c(34)),o=(c(43),c(16)),l=c(12),j=c.p+"static/media/hamburger-icon.adb0166c.svg",d=c(9),b=c.p+"static/media/shopping_cart.5bd91c53.svg",u=n.a.createContext({}),m=c(3);function O(){var e=Object(a.useContext)(u).totalOfProducts,t=Object(a.useState)(0),c=Object(d.a)(t,2),n=c[0],i=c[1];return Object(a.useEffect)((function(){return i(e),function(){i(0)}}),[e]),Object(m.jsx)(m.Fragment,{children:n?Object(m.jsxs)(o.b,{className:"cart-widget",to:"/cart",children:[Object(m.jsx)("img",{className:"cart-widget__icon",src:b,alt:"Carrito de compra"}),Object(m.jsx)("p",{className:"cart-widget__number",children:n})]}):null})}var x=function(){return Object(m.jsxs)("nav",{className:"nav-home",children:[Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("h1",{className:"nav-home__logo",children:"Nebula shop \ud83d\udcab"})}),Object(m.jsx)("button",{className:"nav-home__hamburger-menu",children:Object(m.jsx)("image",{src:j,alt:"Men\xfa hamburguesa"})}),Object(m.jsxs)("div",{className:"nav-home__container-menu",children:[Object(m.jsxs)("div",{className:"nav-home__container-links",children:[Object(m.jsx)(o.c,{to:"/category/libretas",children:"Libretas"}),Object(m.jsx)(o.c,{to:"/category/playeras",children:"Playeras"}),Object(m.jsx)(o.c,{to:"/category/tazas",children:"Tazas"})]}),Object(m.jsx)(O,{})]})]})},h=c(22);function p(e){var t=e.text,c=e.onClick,a=e.disabled;return Object(m.jsx)("button",{className:"simple-button",onClick:function(){return c()},disabled:a,children:t})}function v(e){var t=e.text,c=e.to,a=e.disabled;return Object(m.jsx)(o.b,{className:"link-button",to:c,disabled:a,children:Object(m.jsx)("p",{className:"link-button__text",children:t})})}function _(e){var t=e.text,c=e.to,a=e.disabled;return Object(m.jsx)(o.c,{className:"nav-link-button",to:c,disabled:a,children:Object(m.jsx)("p",{className:"nav-link-button__text",children:t})})}function f(e){var t=e.id,c=e.title,a=e.price,n=e.pictureUrl;return Object(m.jsxs)("div",{id:t,className:"product-resume",children:[Object(m.jsx)("img",{className:"product-resume__img",src:n,alt:"imagen de producto"}),Object(m.jsxs)("div",{className:"product-resume__info",children:[Object(m.jsxs)("div",{className:"container-text",children:[Object(m.jsx)("p",{className:"title",children:c}),Object(m.jsx)("p",{className:"price",children:"$".concat(a)})]}),Object(m.jsx)(_,{to:"/item/".concat(t),text:"Comprar"})]})]})}function N(e){var t=e.items;return Object(m.jsx)("div",{className:"item-list",children:t.map((function(e){return Object(m.jsx)(f,{id:e.id,title:e.title,price:e.price,pictureUrl:e.pictureUrl},e.id)}))})}var g=c(14);function y(){var e=Object(l.g)().idCategory,t=Object(a.useState)(void 0),c=Object(d.a)(t,2),n=c[0],i=c[1];return Object(a.useEffect)((function(){var t=Object(g.f)();if(e){var c=Object(g.g)(Object(g.b)(t,"itemCollection"),Object(g.h)("category","==",e));Object(g.e)(c).then((function(e){0===e.size&&console.log("No result"),i(e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})))}))}else{var a=Object(g.b)(t,"itemCollection");Object(g.e)(a).then((function(e){0===e.size&&console.log("No result"),i(e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})))}))}}),[e]),Object(m.jsx)("div",{children:n?Object(m.jsx)(N,{items:n}):Object(m.jsx)("p",{children:"Loading..."})})}function C(e){var t=e.stock,c=e.count,a=e.onAdd,n=e.addToCart;return Object(m.jsxs)("div",{className:"item-count-container",children:[Object(m.jsxs)("div",{className:"item-count",children:[Object(m.jsx)("button",{className:"item-count__button",onClick:function(){return a("onRemove")},disabled:!c,children:"-"}),Object(m.jsx)("div",{className:"item-count__container-quantity",children:Object(m.jsx)("p",{children:c})}),Object(m.jsx)("button",{className:"item-count__button",onClick:function(){return a("onAdd")},disabled:c>=t,children:"+"})]}),Object(m.jsxs)("div",{className:"buttons-container",children:[Object(m.jsx)("div",{className:"container-button",children:Object(m.jsx)(p,{onClick:function(){return n()},disabled:c<=0,text:"Agregar"})}),Object(m.jsx)("div",{className:"container-button",children:Object(m.jsx)(v,{to:c?"/cart":"",disabled:c<=0,text:"Ver carrito"})})]})]})}function k(e){var t=e.item,c=Object(a.useContext)(u).addItem,n=Object(a.useState)(1),i=Object(d.a)(n,2),s=i[0],r=i[1];return Object(m.jsxs)("div",{className:"item-detail",id:t.id,children:[Object(m.jsx)("div",{className:"item-detail__img",children:Object(m.jsx)("img",{src:t.pictureUrl,alt:"imagen de producto"})}),Object(m.jsxs)("div",{className:"item-detail__text",children:[Object(m.jsx)("p",{className:"item-detail__text__name",children:t.title}),Object(m.jsx)("p",{className:"item-detail__text__price",children:"$ ".concat(t.price," MXN")}),Object(m.jsx)("p",{className:"item-detail__text__description",children:t.description}),Object(m.jsx)("div",{className:"count",children:Object(m.jsx)(C,{stock:t.stock,count:s,onAdd:function(e){"onAdd"===e?s<t.stock&&r(s+1):"onRemove"===e&&s>0&&r(s-1)},addToCart:function(){c(Object(h.a)(Object(h.a)({},t),{},{quantity:s,totalProduct:t.price*s})),r(1)}})})]})]})}function S(){var e=Object(l.g)().idItem,t=Object(a.useState)(void 0),c=Object(d.a)(t,2),n=c[0],i=c[1];return Object(a.useEffect)((function(){var t=Object(g.f)();if(e){var c=Object(g.c)(t,"itemCollection",e);Object(g.d)(c).then((function(e){e.exists()&&i(Object(h.a)({id:e.id},e.data()))}))}}),[e]),n?Object(m.jsx)(k,{item:n}):Object(m.jsx)("div",{className:"item-message",children:Object(m.jsx)("p",{children:"El producto no existe :("})})}function q(e){var t=e.children,c=Object(a.useState)([]),n=Object(d.a)(c,2),i=n[0],s=n[1],r=Object(a.useState)(0),o=Object(d.a)(r,2),l=o[0],j=o[1],b=Object(a.useState)(0),O=Object(d.a)(b,2),x=O[0],h=O[1],p=Object(a.useState)([]),v=Object(d.a)(p,2),_=v[0],f=v[1],N=function(e){var t=!1;return i.length&&i.map((function(c){c.id===e&&(t=!0)})),t},g=function(e){if(e.length>1){var t=e.reduce((function(e,t){return e+t.totalProduct}),0),c=e.reduce((function(e,t){return e+t.quantity}),0);j(t),h(c)}else 1===e.length&&(j(e[0].totalProduct),h(e[0].quantity))};return Object(a.useEffect)((function(){return g(i),function(){h(0),j(0),f([])}}),[i]),Object(m.jsx)(u.Provider,{value:{addItem:function(e){N(e.id)?i.map((function(t){t.id===e.id&&(t.quantity=t.quantity+e.quantity,t.totalProduct=t.totalProduct+e.price*e.quantity)})):i.push(e),g(i)},removeItem:function(e){var t=[];i.length>1?(i.map((function(c){c.id!==e&&t.push(c)})),s(t)):s(t)},clear:function(){s([]),j(0),h(0),f([])},isInCart:N,products:i,total:l,totalOfProducts:x,orderToSave:function(){var e=[];i.map((function(t){e.push({id:t.id,price:t.price,quantity:t.quantity,title:t.title,totalProduct:t.totalProduct})})),f(e)},order:_},children:t})}var F=c(35),I=c.n(F);function P(){var e=Object(a.useContext)(u),t=e.total,c=e.order,n=e.clear,i=Object(a.useState)(),s=Object(d.a)(i,2),r=s[0],o=s[1],l=Object(a.useState)(),j=Object(d.a)(l,2),b=j[0],O=j[1];return Object(m.jsx)("div",{className:"user-modal",children:r?Object(m.jsxs)("div",{className:"user-modal__container successful",children:[Object(m.jsx)("h2",{className:"alert",children:"\xa1Tu compra se ha realizado exitosamente!"}),Object(m.jsx)("p",{className:"info",children:"ID de compra: ".concat(r)}),Object(m.jsx)("div",{className:"container-button",children:Object(m.jsx)(v,{to:"/",text:"Volver al incio"})})]}):Object(m.jsxs)("div",{className:"user-modal__container",children:[Object(m.jsx)("div",{className:"user-modal__title",children:Object(m.jsx)("h2",{children:"Registro de datos para compra"})}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=Date.now(),i=I()(a).format("L");if(e.target[1].value!==e.target[2].value)O(!0);else{O(!1);var s={buyer:{name:e.target[0].value,phone:e.target[3].value,email:e.target[1].value},items:c,total:t,date:i,state:"generada"},r=Object(g.f)(),l=Object(g.b)(r,"orders");Object(g.a)(l,s).then((function(e){var t=e.id;return o(t)})),n()}},children:[Object(m.jsxs)("div",{className:"inputs-container",children:[Object(m.jsxs)("div",{className:"inputs-container__item",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Nombre"}),Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Jane Doe",required:!0})]}),Object(m.jsxs)("div",{className:"inputs-container__item",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Correo"}),Object(m.jsx)("input",{type:"email",name:"email",placeholder:"jane@example.com",required:!0,className:b?"error-input":""}),b&&Object(m.jsx)("span",{className:"error",children:"No coinciden los campos"})]}),Object(m.jsxs)("div",{className:"inputs-container__item",children:[Object(m.jsx)("label",{htmlFor:"email-confirmation",children:"Confirmar correo el\xe9ctronico"}),Object(m.jsx)("input",{type:"email",name:"email-confirmation",placeholder:"jane@example.com",required:!0,className:b?"error-input":""}),b&&Object(m.jsx)("span",{className:"error",children:"No coinciden los campos"})]}),Object(m.jsxs)("div",{className:"inputs-container__item",children:[Object(m.jsx)("label",{htmlFor:"telephone",children:"Tel\xe9fono"}),Object(m.jsx)("input",{type:"tel",name:"telephone",placeholder:"5512345678",required:!0})]})]}),Object(m.jsx)("div",{className:"submit-container",children:Object(m.jsx)("input",{type:"submit",name:"sendForm",value:"Enviar"})})]})]})})}var T=c.p+"static/media/empty-cart.d17c8390.svg";function z(){var e=Object(a.useContext)(u),t=e.clear,c=e.removeItem,n=e.products,i=e.total,s=e.orderToSave,r=Object(a.useState)([]),o=Object(d.a)(r,2),l=o[0],j=o[1],b=Object(a.useState)(!1),O=Object(d.a)(b,2),x=O[0],h=O[1];return Object(a.useEffect)((function(){return j(n),function(){j([])}}),[n]),Object(m.jsxs)(m.Fragment,{children:[l&&l.length?Object(m.jsxs)("div",{className:"cart",children:[Object(m.jsx)("div",{className:"cart__title",children:Object(m.jsx)("h3",{className:"cart__title__text",children:"Carrito de compras"})}),Object(m.jsxs)("div",{className:"cart__detail",children:[Object(m.jsx)("hr",{className:"line"}),l.map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"cart__detail__item",children:[Object(m.jsx)("img",{className:"cart__detail__item__img",src:e.pictureUrl,alt:e.title}),Object(m.jsxs)("div",{className:"text-container",children:[Object(m.jsx)("p",{className:"text-container__quantity",children:e.quantity}),Object(m.jsx)("p",{className:"text-container__title",children:e.title}),Object(m.jsx)("p",{className:"text-container__price",children:"$ ".concat(e.totalProduct," MXN")}),Object(m.jsx)("div",{className:"text-container__button",children:Object(m.jsx)(p,{onClick:function(){return c(e.id)},text:"Borrar"})})]})]},"".concat(e.id,"-{product.category}")),Object(m.jsx)("hr",{className:"line"})]})}))]}),Object(m.jsxs)("div",{className:"cart__total",children:[Object(m.jsxs)("div",{className:"cart__total__info",children:[Object(m.jsx)("p",{className:"cart__total__info__text",children:"Total:"}),Object(m.jsx)("p",{className:"cart__total__info__quantity",children:"$ ".concat(i," MXN")})]}),Object(m.jsxs)("div",{className:"container-buttons",children:[Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(p,{onClick:function(){return t()},text:"Vaciar carrito"})}),Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(p,{onClick:function(){s(),h(!0)},text:"Finalizar compra"})})]})]})]}):Object(m.jsxs)("div",{className:"cart empty",children:[Object(m.jsx)("img",{src:T,className:"empty-icon",alt:"Carrito de compra"}),Object(m.jsx)("p",{className:"empty-message",children:"Carrito vac\xedo :("}),Object(m.jsx)("div",{className:"button-buy-container",children:Object(m.jsx)(v,{to:"/",text:"Comprar"})})]}),x&&Object(m.jsx)(P,{})]})}var D=function(){return Object(m.jsx)(q,{children:Object(m.jsxs)(o.a,{children:[Object(m.jsx)(x,{}),Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",element:Object(m.jsx)(y,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/category/:idCategory",element:Object(m.jsx)(y,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/item/:idItem",element:Object(m.jsx)(S,{})}),Object(m.jsx)(l.a,{exact:!0,path:"/cart",element:Object(m.jsx)(z,{})})]})]})})},E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,48)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))},w={apiKey:"AIzaSyCLN4TfgDBGoWFpT2m3UDaVmY6tF3bc-LM",authDomain:"nebula-shop.firebaseapp.com",projectId:"nebula-shop",storageBucket:"nebula-shop.appspot.com",messagingSenderId:"1007928044602",appId:"1:1007928044602:web:00d4ef7eb10861324b9903"};Object(r.a)(w),s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),E()}},[[47,1,2]]]);
//# sourceMappingURL=main.e636ecfd.chunk.js.map